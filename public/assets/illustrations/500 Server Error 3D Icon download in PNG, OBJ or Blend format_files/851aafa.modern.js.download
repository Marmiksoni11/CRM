(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1179:function(t,e,o){"use strict";var n=o(5),r=o(333),l=o.n(r),c=o(1178),d=o(1362);Object(c.d)({en:d}),e.a={components:{ValidationObserver:c.a,ValidationProvider:c.b},data:()=>({isLoading:!1}),methods:{validate(){var t=this;return Object(n.a)((function*(){if(!(yield t.$refs.observer.validate())){var title=l()(t.$refs.observer.errors,(t=>t.length))[0]||"Please check all fields";return t.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"}),!1}return!0}))()},onError(t){console.error(t);var title=null;t.response&&t.response.data?t.response.data.elements?(title=Object.values(t.response.data.elements)[0],this.$refs.observer&&this.$refs.observer.setErrors(t.response.data.elements)):t.response.data.message&&(title=t.response.data.message):title=t.message||"Oops, Something went wrong!",this.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"})}}}},3353:function(t,e,o){var content=o(4869);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(42).default)("59e5057b",content,!0,{sourceMap:!1})},3354:function(t,e,o){var content=o(4871);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(42).default)("02aa6c79",content,!0,{sourceMap:!1})},4868:function(t,e,o){"use strict";var n=o(3353),r=o.n(n);o.d(e,"default",(function(){return r.a}))},4869:function(t,e,o){var n=o(41)(!1);n.push([t.i,".container_B19Bj .wrapper_TML4R{border-radius:12px;border:4px dashed #fede7e;background:#fef3dd}.container_B19Bj .offerText_f1HI-{font-size:12px}\n",""]),n.locals={container:"container_B19Bj",wrapper:"wrapper_TML4R",offerText:"offerText_f1HI-"},t.exports=n},4870:function(t,e,o){"use strict";var n=o(3354),r=o.n(n);o.d(e,"default",(function(){return r.a}))},4871:function(t,e,o){var n=o(41)(!1);n.push([t.i,".modal_xQXdE .modal-dialog{max-width:536px !important}@media (max-width: 1023.98px){.modal_xQXdE .modal-dialog{margin:0 auto}}.modal_xQXdE .modal-dialog .modal-title{max-width:400px}.modal_xQXdE .modal-body{padding:1.25rem}.modal_xQXdE .custom-radio{font-size:.875rem;margin-bottom:.5rem}.modal_xQXdE .conclusionText_K3VoL{font-size:12px}\n",""]),n.locals={modal:"modal_xQXdE",conclusionText:"conclusionText_K3VoL"},t.exports=n},5151:function(t,e,o){"use strict";o.r(e);o(239);var n=o(5),r=(o(540),o(27),o(37),o(29),o(5163)),l=o(5081),c=o(2535),d=o(2452),f=o(68),m=o(333),v=o.n(m),h=o(1178),_=o(1250),y=o(23),x=o(60),w=o(1179),$=o(172),k={components:{Lottie:$.default},props:{discountDetails:{type:Object,default:()=>{}},uuid:{type:String,default:null},nextBillingDate:{type:String,default:null}},data:()=>({isLoading:!1}),methods:{acceptOffer(){var t=this;return Object(n.a)((function*(){try{t.isLoading=!0;var e=Object(y.c)("/api/v2/auth/subscriptions/{uuid}/discount/apply",{uuid:t.uuid});yield t.$axios.post(e),t.$analytics.track("cancel-subscription-modal",{route_path:t.$route.path,route_name:t.$route.name,action:"accept-offer"}),t.$emit("discountApplied")}catch(e){console.error(e);var title="Offer is not applied!";t.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"})}finally{t.isLoading=!1}}))()},cancelSubscription(){this.$emit("cancelSubscription",!0)}}},C=o(4868),j=o(8);var S=Object(j.a)(k,(function(){var t=this,e=t._self._c;return e("div",{class:t.$style.container},[e("div",{staticClass:"font-size-sm mb-4"},[t._v("\n    On a budget? No worries! Hereâ€™s a sweet deal to make accessing our amazing\n    design assets a little lighter on your wallet ðŸ™Œ\n  ")]),t._v(" "),e("div",{class:["mb-4 d-flex align-items-center",t.$style.wrapper]},[t._m(0),t._v(" "),e("div",[e("lottie",{attrs:{width:200,height:166,observe:!1,intermission:"0",speed:"1","animation-name":"Offer",loop:""}})],1)]),t._v(" "),e("div",{class:["mb-5-5",t.$style.offerText]},[t._v("\n    You will only be charged\n    "),e("s",[t._v("$"+t._s(t.discountDetails.gross_amount))]),t._v(" "),e("b",[t._v("$"+t._s(t.discountDetails.net_amount))]),t._v(" on your next billing date ("+t._s(t.$root.$options.filters.date(t.nextBillingDate))+").\n  ")]),t._v(" "),e("button",{class:["btn btn-primary btn-block mb-3",t.isLoading?"ajax-loading disabled":null],attrs:{type:"button"},on:{click:t.acceptOffer}},[t._v("\n    Accept offer\n  ")]),t._v(" "),e("div",{staticClass:"d-flex justify-content-center"},[e("button",{staticClass:"btn btn-zero p-2-5",attrs:{type:"button"},on:{click:t.cancelSubscription}},[t._v("\n      No thanks, cancel auto-renewal\n    ")])])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"py-5-5 pl-5-5"},[e("div",{staticClass:"h5 mb-2"},[t._v("Exclusive, one-time discount offer")]),t._v(" "),e("div",{staticClass:"font-size-sm"},[t._v("\n        Get "),e("b",[t._v("33% off")]),t._v(" your next billing cycle so you can continue to\n        enjoy using the worldâ€™s largest design ecosystem!\n      ")])])}],!1,(function(t){this.$style=C.default.locals||C.default}),null,null).exports;Object(h.c)("required",_.f),Object(h.c)("min",_.c);var O={components:{BModal:r.a,BFormTextarea:l.a,BFormGroup:c.a,BFormRadioGroup:d.a,Lottie:$.default,DiscountSubscription:S},mixins:[x.a,w.a],props:{subscription:{type:Object,default:()=>{}}},data(){return{showDiscount:!1,form:{report:null,message:null},options:[{value:"Don't charge me on next renewal date",text:"Don't charge me on next renewal date (".concat(this.$root.$options.filters.date(this.subscription.next_billing_at),")"),label:"How can we welcome you back soon?"},{value:"I was not able to find relevant assets for my use case",text:"I was not able to find relevant assets for my use case",label:"What type of assets were you looking for?"},{value:"Service is not up to the mark",text:"Service is not up to the mark",label:"Sorry to disappoint you. What we did wrong?"},{value:"IconScout is too expensive",text:"IconScout is too expensive",label:"How much we should charge for the service?"},{value:"I found a better alternative",text:"I found a better alternative",label:"Which solution did you choose and why?"},{value:"other",text:"Other",label:"Please describe your reason *"}],canceledSubscription:!1,discountApplied:!1,customErrorMessages:{en:{fields:{reason:{required:"Please choose any one reason"},description:{required:"Please describe your reason"}}}}}},computed:{labelContent(){var option=v()(this.options,{value:this.form.report});return option?option.label:"Please describe your reason"},title(){return this.discountApplied?"Awesome, weâ€™ve applied your exclusive discount!":this.canceledSubscription?"We're sorry to see you go!":this.$t("modals.survey.title")},discountedPrice(){return Number(.6666*this.subscription.transaction.net_amount).toFixed(2)},expiresAt(){return Object(f.subDays)(this.subscription.next_billing_at,1)}},watch:{"form.report"(t){this.form.message="IconScout is too expensive"===t?"I would like to pay $".concat(this.discountedPrice," / ").concat(1===this.subscription.plan_info.frequency?this.subscription.plan_info.period:"".concat(this.subscription.plan_info.frequency," ").concat(this.subscription.plan_info.period,"s"),"."):null}},created(){Object(h.d)("en",this.customErrorMessages.en)},methods:{onSubmit(){var t=this;return Object(n.a)((function*(){try{if(yield t.validate())if(t.isLoading=!0,"stripe"===t.subscription.transaction.gateway&&"personal"===t.subscription.plan_info.type&&"year"===t.subscription.plan_info.period){var e=Object(y.c)("/api/v2/auth/subscriptions/{uuid}/discount",{uuid:t.subscription.uuid}),o=yield t.$axios.post(e,t.form);o.data.response.eligible_for_discount?(t.discountDetails=o.data.response,t.showDiscount=!0,t.$analytics.track("cancel-subscription-modal",{reason:t.form.report,message:t.form.message,action:"eligible-for-discount"})):yield t.cancelSubscription()}else yield t.cancelSubscription()}catch(e){t.onError(e)}finally{t.isLoading=!1}}))()},cancelSubscription(){var t=arguments,e=this;return Object(n.a)((function*(){var o=t.length>0&&void 0!==t[0]&&t[0];try{var n=Object(y.c)("/api/v2/auth/subscriptions/{uuid}/cancel",{uuid:e.subscription.uuid}),r=Object(y.c)("/api/v2/auth/subscriptions/{uuid}/cancel/report",{uuid:e.subscription.uuid});yield Promise.all([e.$axios.post(n,e.form),e.$axios.post(r,e.form)]),o?e.$analytics.track("cancel-subscription-modal",{route_path:e.$route.path,route_name:e.$route.name,action:"cancel-discounted-subscription"}):e.$analytics.track("cancel-subscription-modal",{reason:e.form.report,message:e.form.message,action:"cancel-subscription"}),e.canceledSubscription=!0}catch(t){e.onError(t)}}))()},goToDashboard(){this.isLoading=!0,window.location.reload()},onClose(){this.$analytics.track("cancel-subscription-modal",{route_path:this.$route.path,route_name:this.$route.name,action:"close-modal",data:{modalVariant:this.canceledSubscription?"subscription-canceled":this.discountApplied?"offer-accepted":this.showDiscount?"offer-content":"reason-content"}}),this.$modal.close("modalCancelSubscription"),this.$router.push({name:"exclusive-3ds"})}}},D=O,L=o(4870);var T=Object(j.a)(D,(function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modalCancelSubscription","modal-class":["scale",t.$style.modal],title:t.title,"no-close-on-backdrop":"",centered:"","hide-footer":"",visible:"",lazy:""}},[t.canceledSubscription?e("div",{staticClass:"lead"},[e("div",{staticClass:"font-size-sm"},[t._v("\n      Your auto-renewal has been cancelled, and your account will not be\n      charged for the next cycle; however, you can continue to use the\n      subscription until the "+t._s(t._f("date")(t.expiresAt))+".\n    ")]),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-center"},[e("lottie",{attrs:{width:253,height:253,observe:!1,intermission:"0",speed:"1","animation-name":"Crying",loop:""}})],1),t._v(" "),e("button",{class:["btn btn-primary btn-block",t.isLoading?"ajax-loading-light disabled":null],attrs:{type:"button"},on:{click:t.onClose}},[t._v("\n      "+t._s(t.$t("buttons.explore_exclusive"))+"\n    ")])]):t.discountApplied?e("div",{staticClass:"lead"},[e("div",{staticClass:"font-size-sm mb-2-5"},[t._v("\n      Weâ€™re thrilled youâ€™re staying on with us. Your discount will be applied\n      at your next subscription renewal. Enjoy using our 8 million+ design\n      assets for all your creative needs ðŸ¥³\n    ")]),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-center"},[e("lottie",{attrs:{width:253,height:253,observe:!1,intermission:"0",speed:"1","animation-name":"Celebration",loop:""}})],1),t._v(" "),e("div",{class:["mb-4",t.$style.conclusionText]},[t._v("\n      You will only be charged\n      "),e("s",[t._v("$"+t._s(t.discountDetails.gross_amount))]),t._v(" "),e("b",[t._v("$"+t._s(t.discountDetails.net_amount))]),t._v("\n      on your next billing date ("+t._s(t._f("date")(t.subscription.next_billing_at))+").\n    ")]),t._v(" "),e("a",{class:["btn btn-primary btn-block mt-5",t.isLoading?"ajax-loading-light disabled":null],attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goToDashboard.apply(null,arguments)}}},[t._v("\n      Go to Dashboard\n    ")])]):t.showDiscount&&t.discountDetails?[e("discount-subscription",{attrs:{"discount-details":t.discountDetails,uuid:t.subscription.uuid,"next-billing-date":t.subscription.next_billing_at},on:{discountApplied:function(e){t.discountApplied=!0},cancelSubscription:t.cancelSubscription}})]:[e("p",{staticClass:"mb-4 font-size-sm"},[t._v("\n      Thank you for giving us a chance, we would love to understand more from\n      you about how we could have made your experience better.\n    ")]),t._v(" "),e("validation-observer",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(o){var{invalid:n}=o;return[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"font-weight-bold mb-2-5"},[t._v("\n          Why do you want to cancel?\n          "),e("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),e("b-form-group",[e("validation-provider",{attrs:{rules:"required",vid:"report",name:"reason"},scopedSlots:t._u([{key:"default",fn:function(o){var{failed:n}=o;return[e("b-form-radio-group",{attrs:{options:t.options,state:!n,stacked:""},model:{value:t.form.report,callback:function(e){t.$set(t.form,"report",e)},expression:"form.report"}})]}}],null,!0)})],1),t._v(" "),e("b-form-group",{staticClass:"mb-0"},[e("validation-provider",{attrs:{disabled:"other"!==t.form.report,vid:"message",name:"description",rules:"required|min:15"},scopedSlots:t._u([{key:"default",fn:function(o){var{failed:n}=o;return[e("div",{staticClass:"d-flex justify-content-between"},[e("label",{staticClass:"font-weight-bold",attrs:{for:"description"}},[t._v("\n                "+t._s(t.labelContent)+"\n                "),e("span",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),e("span",{staticClass:"o50 font-size-sm"},[t._v("min 15 characters")])]),t._v(" "),e("b-form-textarea",{attrs:{id:"description",rows:2,"max-rows":5,state:!n,name:"description",placeholder:"Briefly describe the reason"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message","string"==typeof e?e.trim():e)},expression:"form.message"}})]}}],null,!0)})],1),t._v(" "),e("button",{class:["btn btn-primary btn-block mt-5",t.isLoading?"ajax-loading disabled":null],attrs:{disabled:n,type:"submit"}},[t._v("\n          Cancel Auto-Renewal\n        ")])],1)]}}])})]],2)}),[],!1,(function(t){this.$style=L.default.locals||L.default}),null,null);e.default=T.exports}}]);
